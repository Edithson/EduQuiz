<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des MatiÃ¨res - EduQuiz</title>
    <link rel="stylesheet" href="style3.css">
</head>
<body>
    <div class="floating-elements">
        <div class="floating-book">ğŸ“š</div>
        <div class="floating-atom">âš›ï¸</div>
        <div class="floating-globe">ğŸŒ</div>
    </div>

    <div class="container">
        <div class="page-header">
            <h1 class="page-title">ğŸ“š Gestion des MatiÃ¨res</h1>
            <p class="page-subtitle">
                Organisez et gÃ©rez toutes les matiÃ¨res de votre plateforme d'apprentissage. 
                CrÃ©ez, modifiez et suivez les performances de chaque discipline ! ğŸ¯
            </p>
        </div>

        <div class="action-bar">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="ğŸ” Rechercher une matiÃ¨re..." 
                       onkeyup="filterSubjects()" id="searchInput">
                <select class="filter-select" onchange="filterByLevel()" id="levelFilter">
                    <option value="">Tous les niveaux</option>
                    <option value="debutant">DÃ©butant</option>
                    <option value="intermediaire">IntermÃ©diaire</option>
                    <option value="avance">AvancÃ©</option>
                </select>
            </div>
            <button class="add-btn" onclick="openModal()">
                â• Ajouter une matiÃ¨re
            </button>
        </div>

        <div class="subjects-grid" id="subjectsGrid">
            <!-- Les matiÃ¨res seront gÃ©nÃ©rÃ©es dynamiquement ici -->
        </div>
    </div>

    <!-- Modal pour ajouter/modifier une matiÃ¨re -->
    <div id="subjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">ğŸ“š Ajouter une nouvelle matiÃ¨re</h2>
                <button class="close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="subjectForm">
                    <div class="form-group">
                        <label for="subjectName" class="form-label">ğŸ“– Nom de la matiÃ¨re</label>
                        <input type="text" id="subjectName" class="form-input" required 
                               placeholder="Ex: MathÃ©matiques AppliquÃ©es">
                    </div>
                    
                    <div class="form-group">
                        <label for="subjectCode" class="form-label">ğŸ”¢ Code de la matiÃ¨re</label>
                        <input type="text" id="subjectCode" class="form-input" required 
                               placeholder="Ex: MATH101">
                    </div>
                    
                    <div class="form-group">
                        <label for="subjectDescription" class="form-label">ğŸ“ Description</label>
                        <textarea id="subjectDescription" class="form-textarea" 
                                  placeholder="DÃ©crivez le contenu et les objectifs de cette matiÃ¨re..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="subjectLevel" class="form-label">ğŸ“Š Niveau de difficultÃ©</label>
                        <select id="subjectLevel" class="form-select" required>
                            <option value="">Choisissez un niveau...</option>
                            <option value="debutant">ğŸŸ¢ DÃ©butant</option>
                            <option value="intermediaire">ğŸŸ¡ IntermÃ©diaire</option>
                            <option value="avance">ğŸ”´ AvancÃ©</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="subjectIcon" class="form-label">ğŸ¨ IcÃ´ne (Emoji)</label>
                        <input type="text" id="subjectIcon" class="form-input" 
                               placeholder="Ex: ğŸ§®" maxlength="2">
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Annuler</button>
                <button type="button" class="btn-save" onclick="saveSubject()">Enregistrer</button>
            </div>
        </div>
    </div>

    <script>
        // DonnÃ©es de dÃ©monstration
        let subjects = [
            {
                id: 1,
                name: "MathÃ©matiques GÃ©nÃ©rales",
                code: "MATH101",
                description: "Fondamentaux des mathÃ©matiques pour l'enseignement supÃ©rieur",
                level: "debutant",
                icon: "ğŸ§®",
                questionsCount: 145,
                studentsCount: 89
            },
            {
                id: 2,
                name: "Histoire Contemporaine",
                code: "HIST201",
                description: "Ã‰tude des Ã©vÃ©nements historiques des 19e et 20e siÃ¨cles",
                level: "intermediaire",
                icon: "ğŸ“œ",
                questionsCount: 78,
                studentsCount: 56
            },
            {
                id: 3,
                name: "LittÃ©rature FranÃ§aise",
                code: "LITT301",
                description: "Analyse des Å“uvres majeures de la littÃ©rature franÃ§aise",
                level: "avance",
                icon: "ğŸ“–",
                questionsCount: 92,
                studentsCount: 34
            },
            {
                id: 4,
                name: "Sciences Physiques",
                code: "PHYS102",
                description: "Principes fondamentaux de la physique appliquÃ©e",
                level: "intermediaire",
                icon: "âš›ï¸",
                questionsCount: 167,
                studentsCount: 73
            },
            {
                id: 5,
                name: "GÃ©ographie Humaine",
                code: "GEO201",
                description: "Ã‰tude des interactions entre l'homme et son environnement",
                level: "debutant",
                icon: "ğŸŒ",
                questionsCount: 54,
                studentsCount: 42
            },
            {
                id: 6,
                name: "Ã‰conomie Politique",
                code: "ECON301",
                description: "Analyse des systÃ¨mes Ã©conomiques et politiques modernes",
                level: "avance",
                icon: "ğŸ’°",
                questionsCount: 89,
                studentsCount: 28
            }
        ];

        let editingId = null;

        // Rendu des matiÃ¨res
        function renderSubjects(subjectsToRender = subjects) {
            const grid = document.getElementById('subjectsGrid');
            grid.innerHTML = '';

            subjectsToRender.forEach(subject => {
                const subjectCard = document.createElement('div');
                subjectCard.className = 'subject-card';
                subjectCard.innerHTML = `
                    <div class="subject-header">
                        <div>
                            <div class="subject-icon">${subject.icon}</div>
                            <h3 class="subject-title">${subject.name}</h3>
                            <p class="subject-code">${subject.code}</p>
                        </div>
                        <div class="subject-actions">
                            <button class="action-btn edit-btn" onclick="editSubject(${subject.id})" title="Modifier">âœï¸</button>
                            <button class="action-btn delete-btn" onclick="deleteSubject(${subject.id})" title="Supprimer">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <p class="subject-description">${subject.description}</p>
                    <div class="subject-stats">
                        <div class="stat-item">
                            <span class="stat-number">${subject.questionsCount}</span>
                            <div class="stat-label">Questions</div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">${subject.studentsCount}</span>
                            <div class="stat-label">Ã‰tudiants</div>
                        </div>
                        <div class="stat-item">
                            <span class="subject-level level-${subject.level}">
                                ${subject.level.charAt(0).toUpperCase() + subject.level.slice(1)}
                            </span>
                        </div>
                    </div>
                `;
                grid.appendChild(subjectCard);
            });
        }

        // Filtrage des matiÃ¨res
        function filterSubjects() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const levelFilter = document.getElementById('levelFilter').value;
            
            let filtered = subjects.filter(subject => {
                const matchesSearch = subject.name.toLowerCase().includes(searchTerm) || 
                                    subject.code.toLowerCase().includes(searchTerm) ||
                                    subject.description.toLowerCase().includes(searchTerm);
                const matchesLevel = !levelFilter || subject.level === levelFilter;
                
                return matchesSearch && matchesLevel;
            });
            
            renderSubjects(filtered);
        }

        function filterByLevel() {
            filterSubjects();
        }

        // Gestion du modal
        function openModal(subject = null) {
            const modal = document.getElementById('subjectModal');
            const modalTitle = document.getElementById('modalTitle');
            
            if (subject) {
                modalTitle.textContent = 'âœï¸ Modifier la matiÃ¨re';
                document.getElementById('subjectName').value = subject.name;
                document.getElementById('subjectCode').value = subject.code;
                document.getElementById('subjectDescription').value = subject.description;
                document.getElementById('subjectLevel').value = subject.level;
                document.getElementById('subjectIcon').value = subject.icon;
                editingId = subject.id;
            } else {
                modalTitle.textContent = 'ğŸ“š Ajouter une nouvelle matiÃ¨re';
                document.getElementById('subjectForm').reset();
                editingId = null;
            }
            
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('subjectModal').style.display = 'none';
            document.getElementById('subjectForm').reset();
            editingId = null;
        }

        // CRUD Operations
        function saveSubject() {
            const name = document.getElementById('subjectName').value;
            const code = document.getElementById('subjectCode').value;
            const description = document.getElementById('subjectDescription').value;
            const level = document.getElementById('subjectLevel').value;
            const icon = document.getElementById('subjectIcon').value || 'ğŸ“š';

            if (!name || !code || !level) {
                alert('âš ï¸ Veuillez remplir tous les champs obligatoires !');
                return;
            }

            if (editingId) {
                // Modification
                const index = subjects.findIndex(s => s.id === editingId);
                if (index !== -1) {
                    subjects[index] = {
                        ...subjects[index],
                        name,
                        code,
                        description,
                        level,
                        icon
                    };
                }
            } else {
                // Ajout
                const newSubject = {
                    id: Math.max(...subjects.map(s => s.id)) + 1,
                    name,
                    code,
                    description,
                    level,
                    icon,
                    questionsCount: 0,
                    studentsCount: 0
                };
                subjects.push(newSubject);
            }

            renderSubjects();
            closeModal();
            
            const message = editingId ? 'âœ… MatiÃ¨re modifiÃ©e avec succÃ¨s !' : 'âœ… Nouvelle matiÃ¨re ajoutÃ©e avec succÃ¨s !';
            alert(message);
        }

        function editSubject(id) {
            const subject = subjects.find(s => s.id === id);
            if (subject) {
                openModal(subject);
            }
        }

        function deleteSubject(id) {
            const subject = subjects.find(s => s.id === id);
            if (subject && confirm(`ğŸ—‘ï¸ ÃŠtes-vous sÃ»r de vouloir supprimer la matiÃ¨re "${subject.name}" ?\n\nCette action est irrÃ©versible et supprimera Ã©galement toutes les questions associÃ©es.`)) {
                subjects = subjects.filter(s => s.id !== id);
                renderSubjects();
                alert('âœ… MatiÃ¨re supprimÃ©e avec succÃ¨s !');
            }
        }

        // Fermer le modal en cliquant Ã  l'extÃ©rieur
        window.onclick = function(event) {
            const modal = document.getElementById('subjectModal');
            if (event.target == modal) {
                closeModal();
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            renderSubjects();
        });
    </script>
</body>
</html>